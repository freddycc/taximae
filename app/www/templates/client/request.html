<ion-view view-title="Solicitud">
  <ion-content>
  	<div class="list">
	    <div class="list card">
	    	<label class="item item-icon-left item-text-wrap">
	    		<i class="icon ion-android-pin"></i>
	    		{{request.description}}
	    	</label>
	    	<label payment-method class="item item-icon-left"></label>
	    	<label vehicle-type class="item item-icon-left"></label>
		  	<label ng-hide="request.status==''" class="item">
		  		Tiempo de llegada: {{request.time}} <span ng-show="request.time">minutos.</span>
		  	</label>
		  	<label ng-show="request.status!='0'" class="item">
		  		<span request-status></span>
		  	</label>
		  	<label ng-show="request.status=='0'" class="item item-button-right">
		        <span request-status></span>
		        <button ng-show="request.status=='0'" class="button button-small button-positive" ng-click="response()">Responder</button>
	      	</label>
	      	<a ng-hide="request.status=='3' || request.status=='2'" class="item item-icon-left" ng-click="finish()" href="#"><i class="icon ion-android-close"></i>
		        Terminar solicitud
	      	</a>
	      	<a ng-hide="request.status=='3' || request.status=='2'" class="item item-icon-left" ng-click="cancel()" href="#"><i class="icon ion-ios-trash"></i>
		        Cancelar solicitud
	      	</a>
	      	<label ng-show="(request.status=='3' || request.status=='2') && !report.id && request.service_id" class="item item-checkbox">
		  	  Agregar denuncia
		      <label class="checkbox">
		        <input ng-model="addReport" type="checkbox">
		      </label>
		  	</label>
		  	<ion-item class="item item-icon-right item-text-wrap" ng-show="addReport&& !report.id">
		  		<textarea ng-model="report.detail" placeholder="Detalle de la denuncia"></textarea><a class="button button-icon icon ion-ios-paperplane-outline" ng-click="sendReport()"></a>
		  	</ion-item>
		  	<div class="item item-divider item-text-wrap" style="font-size: 12px;" ng-show="report.id">Se agreg&oacute; el siguiente reporte.
	        </div>
		  	<label ng-show="report.id" class="item item-text-wrap">
		  		{{report.detail}}.</span>
		  	</label>
	    </div>
	    <div class="item item-divider item-icon-right" ng-show="request.status=='1'">Mensages<a class="button button-icon icon icon ion-ios-refresh-outline" ng-click="refreshMessages()"></a></div>
	    <div class="list card" ng-show="request.status=='1'">
			<div ng-repeat="msg in messages" class="item item-icon-left item-divider" messages>
			</div>
			<div class="item-input-inset">
			    <select style="width:90%" ng-model="message.message_id">
			    	<option selected value="0">Seleccione un mensaje.</option>
			    	<option ng-repeat="msg in messageList" value="{{msg.id}}">{{msg.message}}</option>
			    </select>
			  	<a class="button button-icon icon ion-android-send" href="#" ng-click="addMessage()"></a>
			</div>
		</div>
	</div>
  </ion-content>
</ion-view>